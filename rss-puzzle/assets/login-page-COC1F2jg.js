import{B as a,L as n}from"./index-q16pZ9WL.js";import{B as m}from"./button-B6elhW0B.js";class o extends a{constructor({type:e,classNameInput:t,name:s,placeholder:r,value:h,onInput:u}){super({tagName:"input",className:t}),u&&this.addListener("change",u),this.setAttributes(e,s,r,h)}setAttributes(e,t,s,r){this.setAttribute("name",t),this.setAttribute("type",e),s&&this.setAttribute("placeholder",s),r&&this.setAttribute("value",r.toString())}}class l{patternInput="^[A-Z][\\-a-zA-z]+$";fieldMinLengthMap=new Map([["Name",3],["Surname",4]]);isValidField(e){return this.isNotEmpty(e.value)&&this.isPattern(e.value)&&this.isLengthMoreThen(e,this.fieldMinLengthMap.get(e.name))?{ok:!0}:{ok:!1,error:{message:`The field should not be empty, only Latin characters and "-", the first letter is capitalized and it length ${this.fieldMinLengthMap.get(e.name)} symbols`}}}isPattern(e){return new RegExp(this.patternInput).test(e)}isNotEmpty(e){return!!e}isLengthMoreThreeSymbol(e){return e.value.length>=3}isLengthMoreFourSymbol(e){return e.value.length>=4}isLengthMoreThen(e,t){return t!==void 0&&e.value.length>=t}}const c=new l;class d extends a{inputName;inputSurname;buttonEnter;messageErrorTextName;messageErrorTextSurname;checkValidation={Name:!1,Surname:!1};constructor(){super({tagName:"form",className:"form-login"}),this.inputName=new o({type:"input",classNameInput:"form-input",name:"Name",placeholder:"Name",onInput:e=>{if(e.currentTarget instanceof HTMLInputElement){this.inputName.setAttribute("value",e.currentTarget.value);const t=this.checkValid(e.currentTarget,this.messageErrorTextName),s="Name";this.checkValidation[s]=t,this.checkButton()}}}),this.messageErrorTextName=new a({tagName:"span",className:"error"}),this.inputSurname=new o({type:"input",classNameInput:"form-input",name:"Surname",placeholder:"Surname",onInput:e=>{if(e.currentTarget instanceof HTMLInputElement){this.inputSurname.setAttribute("value",e.currentTarget.value);const t=this.checkValid(e.currentTarget,this.messageErrorTextSurname),s="Surname";this.checkValidation[s]=t,this.checkButton()}}}),this.messageErrorTextSurname=new a({tagName:"span",className:"error"}),this.buttonEnter=this.createButton(),this.viewWrapper()}viewWrapper(){const e=new a({tagName:"div",className:"form-inputs-wrapper"});e.appendChildren([this.inputName,this.messageErrorTextName,this.inputSurname,this.messageErrorTextSurname,this.buttonEnter]),this.append(e)}createButton(){return new m({className:"form-button login-button disabled",textContent:"LOGIN",onClick:e=>{e.preventDefault(),this.saveDataToLocalStorage(e),document.location.href="/rss-puzzle/welcome"}})}checkValid(e,t){const s=c.isValidField(e);return s.ok?(t.removeClass("show"),!0):(s.error&&this.showErrorMessage(s.error?.message,t),!1)}showErrorMessage(e,t){t.addClass("show"),t.setTextContent(e)}checkButton(){const e=Object.values(this.checkValidation).every(t=>t===!0);this.buttonEnter.toggleClass("disabled",!e)}saveDataToLocalStorage(e){e.preventDefault();const t=this.inputName.getAttribute("value"),s=this.inputSurname.getAttribute("value");t&&s&&n.setItem("user",{name:t,surname:s}),n.setItem("translate_hint",!0),n.setItem("audio_hint",!0),n.setItem("picture_hint",!0)}}export{d as default};
