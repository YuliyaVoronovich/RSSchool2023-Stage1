function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as m,L as a,B as r}from"./index-7QH0AAlO.js";import{B as g}from"./button-CQBf4INP.js";import{L as w}from"./logout-f35lOHOf.js";const P=await m(()=>import("./wordCollectionLevel1-DAd_RTnK.js"),__vite__mapDeps([]),import.meta.url),C=await m(()=>import("./wordCollectionLevel2-1qRKlopN.js"),__vite__mapDeps([]),import.meta.url),L=await m(()=>import("./wordCollectionLevel3-Caq-wj-r.js"),__vite__mapDeps([]),import.meta.url),x=await m(()=>import("./wordCollectionLevel4-CGLGOYkr.js"),__vite__mapDeps([]),import.meta.url),I=await m(()=>import("./wordCollectionLevel5-DD8ZfQ_d.js"),__vite__mapDeps([]),import.meta.url),v=await m(()=>import("./wordCollectionLevel6-BmMsl4Vt.js"),__vite__mapDeps([]),import.meta.url);class l{rounds=[];roundsCount=0;dataRounds(t){if(l.isData(P)&&l.isData(C)&&l.isData(L)&&l.isData(x)&&l.isData(I)&&l.isData(v))switch(t){case 1:{this.rounds=P.rounds,this.roundsCount=P.roundsCount;break}case 2:{this.rounds=C.rounds,this.roundsCount=C.roundsCount;break}case 3:{this.rounds=L.rounds,this.roundsCount=L.roundsCount;break}case 4:{this.rounds=x.rounds,this.roundsCount=x.roundsCount;break}case 5:{this.rounds=I.rounds,this.roundsCount=I.roundsCount;break}case 6:{this.rounds=v.rounds,this.roundsCount=v.roundsCount;break}default:this.rounds=P.rounds,this.roundsCount=P.roundsCount;break}return this.rounds}dataRoundsCount(){return this.roundsCount}static isData(t){return t!=null}}const h=new l;class b{currentIndexLevel=1;currentIndexPicture=0;currentIndexPhrase=0;widthPicture=700;mainPicture="";widthIndent=10;countIndent=2;widthGap=0;countLines=10;heigthOfLine=40;countOfLevels=6;countRoundsOfTheLevel=6;moveXCurrentPosition=0;moveXPositions=[];moveYCurrentPosition=0;moveYPositions=[];infoPictureName;infoPictureAuthor;infoPictureYear;hints={translate:a.getHints("translate_hint"),audio:a.getHints("audio_hint"),picture:a.getHints("picture_hint")};constructor(){const t=new Image;t.src=`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${this.mainPicture}`,this.heigthOfLine=this.widthPicture/t.width*t.height/this.countLines||this.heigthOfLine,this.countRoundsOfTheLevel=this.getData(this.currentIndexLevel),this.infoPictureAuthor=this.getDataPictureAuthor(this.currentIndexLevel),this.infoPictureYear=this.getDataPictureYear(this.currentIndexLevel),this.infoPictureName=this.getDataPictureName(this.currentIndexLevel),console.log(this.infoPictureName),this.positionsCards(),this.setMainPicture()}getDataPictureName(t=this.currentIndexPicture){return h.dataRounds(this.currentIndexLevel)[t].levelData.name}getDataPictureAuthor(t=this.currentIndexPicture){return h.dataRounds(this.currentIndexLevel)[t].levelData.author}getDataPictureYear(t=this.currentIndexPicture){return h.dataRounds(this.currentIndexLevel)[t].levelData.year}getData(t=this.currentIndexLevel){return h.dataRounds(t).length}textHint(t=this.currentIndexPhrase){return h.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExampleTranslate}currentAudio(t=this.currentIndexPhrase){return h.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].audioExample}currentPhrase(t=this.currentIndexPhrase){return h.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample}currentMainPicture(t=this.currentIndexPicture){return h.dataRounds(this.currentIndexLevel)[t].levelData.imageSrc}get countOfLines(){return this.countLines}get heigthOfLineValue(){return this.heigthOfLine}set indent(t){this.widthIndent=t}setMainPicture(){this.mainPicture=h.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].levelData.imageSrc}numWordsInPhrase(t=this.currentIndexPhrase){return h.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample.split(" ").length}numSymbolsInPhrase(t=this.currentIndexPhrase){return h.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample.split(" ").join("").length}positionsCards=()=>{const t=this.currentPhrase(this.currentIndexPhrase).split(" "),e=[],i=[];for(let s=0;s<t.length;s+=1)e.push(this.moveXCurrentPosition),this.moveXCurrentPosition+=this.widthCard(t[s]);this.moveXPositions=e;for(let s=0;s<this.countLines;s+=1)i.push(this.moveYCurrentPosition),this.moveYCurrentPosition+=this.heigthOfLine;this.moveYPositions=i};widthCard(t){return(this.widthPicture-this.numWordsInPhrase()*this.countIndent*this.widthIndent-this.widthGap*(this.numWordsInPhrase()-1))/this.numSymbolsInPhrase()*t.length+this.countIndent*this.widthIndent}}const n=new b;class A{play(t,e){const i="https://github.com/rolling-scopes-school/rss-puzzle-data/raw/main/",s=new Audio(i+n.currentAudio(t));s.play().then(()=>{s.addEventListener("ended",()=>{e()})}).catch(()=>{throw new Error("не удалось воспроизвести аудиофайл")})}}const k=new A;class N extends r{constructor(t,e){super({tagName:"div",className:"game-header"}),this.onClickTranslate=t,this.onClickBackground=e;const i=a.getHints("translate_hint"),s=a.getHints("picture_hint"),d=a.getHints("audio_hint"),o=this.createButtonTranslate(i),c=this.createButtonBackground(s),u=this.createButtonAudio(d);this.toolbarSound=this.createMute(d),this.hintTranslate=new r({tagName:"div",className:"toolbar-hints"},o,c,u);const p=new r({tagName:"div",className:"select-wrapper"});this.appendChildren([this.hintTranslate,this.toolbarSound,p])}hintTranslate;toolbarSound;isSound=!1;createMute=t=>(this.toolbarSound=new r({tagName:"div",className:"toolbar-sound"},new g({className:"icon-button-sound",textContent:"",onClick:e=>{this.isSound||(e.preventDefault(),this.toolbarSound.addClass("active"),this.isSound=!0,k.play(n.currentIndexPhrase,()=>{this.toolbarSound.removeClass("active"),this.isSound=!1}))}})),this.toolbarSound.toggleClass("show",t),this.toolbarSound);createButtonTranslate(t){const e=new r({tagName:"div",className:"hint-translate"},new g({className:"icon-button",textContent:"",onClick:i=>{i.preventDefault(),this.toogleHintTranslate(e),this.onClickTranslate(n.hints)}}));return e.toggleClass("hint-on",t),e}toogleHintTranslate(t){const e=a.getHints("translate_hint");a.setItem("translate_hint",!e),t.toggleClass("hint-on"),n.hints.translate=!e}createButtonBackground(t){const e=new r({tagName:"div",className:"hint-background"},new g({className:"icon-button",onClick:i=>{i.preventDefault(),this.toogleHintBackground(e),this.onClickBackground(n.hints)}}));return e.toggleClass("hint-on",t),e}toogleHintBackground(t){const e=a.getHints("picture_hint");a.setItem("picture_hint",!e),t.toggleClass("hint-on"),n.hints.picture=!e}createButtonAudio(t){const e=new r({tagName:"div",className:"hint-audio"},new g({className:"icon-button",onClick:i=>{i.preventDefault(),this.toogleHintAudio(e),this.toolbarSound.toggleClass("show")}}));return e.toggleClass("hint-on",t),e}toogleHintAudio(t){const e=a.getHints("audio_hint");a.setItem("audio_hint",!e),t.toggleClass("hint-on"),n.hints.audio=!e}}class z extends r{onClick;positionYOnset=12;constructor(t,e,i,s,d,o,c,u){super({tagName:"div",className:"tile-card"}),this.append(this.createCard(t,e,i,s,d,o,c)),this.onClick=u,this.onClick&&this.addListener("click",()=>{this.onClick(this.getNode())})}createCard(t,e,i,s,d,o,c){const u=new r({tagName:"div",className:`tile-${e} card`},new r({tagName:"div",className:"word",textContent:t},this.createAfter(e,d,o,i,c)));let p="";return s&&(p=`height:${s}px`),u.setAttribute("style",`width:${i}px;${p};`),c&&(u.getNode().style.backgroundImage=`url(https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${n.mainPicture})`,u.getNode().style.backgroundPosition=`-${d}px  -${o}px`),u.setAttribute("data",`${e}`),u}createAfter(t,e,i,s,d){const o=new r({tagName:"span",className:"after"});t===n.numWordsInPhrase(n.currentIndexPhrase)-1&&o.setAttribute("style","backgroundColor: #fff; left:0");const c=e+s,u=i+this.positionYOnset;return d&&(o.getNode().style.backgroundImage=`url(https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${n.mainPicture})`,o.getNode().style.backgroundPosition=`-${c}px  -${u}px`),o}}class R extends r{zIndexCoefficient=10;fieldPicture;fieldLines=[];linePuzzles;gameLine;hintLine;buttonContinue;buttonCheck;buttonAutofill;buttonWrapper;textHint;headerPage;dopinfo;showBackgroundOnCard=!0;constructor(){super({tagName:"div",className:"game-wrapper"}),this.fieldPicture=this.createFieldPicture(),this.linePuzzles=this.createLinePuzzles(),this.buttonContinue=this.createButtonContinue(),this.buttonCheck=this.createButtonCheck(),this.buttonAutofill=this.createButtonAutofill(),this.hintLine=this.createLineHint(),this.headerPage=new N(this.changeHintTranslate,this.changeHintsBackground),this.buttonWrapper=new r({tagName:"div",className:"button-wrapper"},this.buttonContinue,this.buttonCheck,this.buttonAutofill),this.inputPuzzles(),this.appendChildren([this.headerPage,this.fieldPicture,this.hintLine,this.linePuzzles,this.buttonWrapper,new w])}changeHintTranslate=t=>{console.log(t),t.translate?this.hintLine.addClass("show"):this.hintLine.removeClass("show")};changeHintsBackground=t=>{console.log(t)};createInfoPicture(){return new r({tagName:"div",className:"dop-info-inner"},new r({tagName:"span",className:"dop-info-author",textContent:n.getDataPictureAuthor(n.currentIndexPicture)}),new r({tagName:"span",className:"dop-info-name",textContent:`${n.getDataPictureName(n.currentIndexPicture)} - (${n.getDataPictureYear(n.currentIndexPicture)})`}))}createFieldPicture(){return this.dopinfo=new r({tagName:"div",className:"dop-info"},this.createInfoPicture()),new r({tagName:"div",className:"game-field"},...this.generateLinesOfField(),this.dopinfo)}createLinePuzzles(){return this.gameLine=new r({tagName:"div",className:"game-line"}),this.gameLine}inputPuzzles(){const t=this.generatePuzzles();for(let e=0;e<t.length;e+=1)t[e].getNode().style.zIndex=`${n.numWordsInPhrase(n.currentIndexPhrase)*this.zIndexCoefficient-this.zIndexCoefficient*e}`,this.gameLine?.append(t[e])}generatePuzzles(){return n.currentPhrase(n.currentIndexPhrase).split(" ").map((e,i)=>new z(e,i,n.widthCard(e),n.heigthOfLine,n.moveXPositions[i],n.moveYPositions[n.currentIndexPhrase],this.showBackgroundOnCard,this.clickPuzzle)).sort(()=>Math.random()-.5)}generateLinesOfField(){this.fieldLines=[];for(let t=0;t<n.countOfLines;t+=1){const e=new r({tagName:"div",className:"field-line"},...this.generateTilesOfLine(t));e.setAttribute("style",`height:${n.heigthOfLine}px`),this.fieldLines.push(e)}return this.fieldLines}generateTilesOfLine(t){const e=[];for(let i=0;i<n.numWordsInPhrase(t);i+=1){const s=new r({tagName:"div",className:"tile-card empty-card"});s.addListener("click",()=>{this.clickPuzzleLine(s)}),e.push(s)}return e}createButtonContinue(){return new g({className:"form-button game-button hide",textContent:"Continue",onClick:t=>{t.preventDefault(),this.moveToNextRound()}})}createButtonCheck(){return new g({className:"form-button game-button hide",textContent:"Check",onClick:t=>{t.preventDefault(),this.checkRightPhrase()}})}createButtonAutofill(){return new g({className:"form-button game-button game-button-autofill",textContent:"I don't no ;(",onClick:t=>{t.preventDefault(),this.autofillCards()}})}createHintTranslateText=()=>new r({tagName:"span",className:"text-hint",textContent:n.textHint(n.currentIndexPhrase)});createLineHint(){const t=new r({tagName:"img",className:"icon-hint"}),e=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABHNCSVQICAgIfAhkiAAAAAFzUkdCAK7OHOkAAAAEZ0FNQQAAsY8L/GEFAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAE+UlEQVRIS8VVW2wUVRj+z5mZ3elut912t8WtllpoG5EESYPSKOUiRCJqLMZo9MEQLMQXn/GFBxOM+uCDPBFiNIaYaIxEDSoPlhRpjJfUYKpNGhokYLkpW/Y2u3M7x+/MDO2uRdEX/bNn/90z//m+/3b+of9CWKRvKXuJDLMtl7OcWqrsEJVdKh2j+V/xSIQWfy1/S7I7k0mZkm8nybbEOeszNb0j2xxPtic1SsR0q0nXLscZ/aRJdqI860yMXJspRUcb5KYkL7a3t/hkPOdJOdqi63097U3J1cuS1J0xKdGkkY5TnDHisLU9QZ4vi54n5xxbfH69aL09NDE9HSKFsoTkhc7OIfLYAY1o60A2Sff1ttLKXIJiGkn1XAhJvi9J4l+0GIdWQAL7JVtcLJa8Vz4ZSx1+mU566kwDyWh7504m6WBK1+4YWpGm4YG0TCU0clxBPjKvQIXrke84YMRRIwZS7IM4gJKSGZwTIvLzZWf/4NjpVxXuAsloW8d2QfJIq2F0PHR3Vj7Q34ozkhwPXgMkILBrZNw1SPHhR0iWi1R4/xC891F5BhvFIUnxmYwxy/Ht62X55PqTPxxTaaVdbV3dHonXTK51bBlolxtA4MM6IFDg0fJrNmm9qyi5dYTigxuQNhAoByICZascqrhCNhtaPB6jPe/09JgBiWTOLo342tVdKbq/L60KSa4LrwKAuqXIEI0SUSmTgBPKJlzYi3REREj9xr7uli7+bGtrG5PyiVRMp+GVaanrRA4KIFTofwaQjEQtIqlZ2IPdAnjjcoER4yyNwrVxnfMudOGa/o4ELUsZhFYk6YfeqDTUewgVkEgUX9j2QoQNNje06kD81jxXcuQyy9GFy9tMius8SNVifsNDi0VFJOgs8uwgbSEgih5EXedYcJiR5fpFwUWBuz6vGbhYzXHkCV2ijFXRVcsqrQD8CAR/gwiUXRANHAqIosgXIsF+DJjA+M60zUvc1+UlT8jf1VULcxx5rnSdh8E+18m5cpHyR49QYfx40LrYDoHVAri6qCg4C+6WKz9aNzlpcZqfn6sK8UXJ8gjpa/Qo0DdWFJXjEukGGblukGqRXWSL5/iQiYFTdsSJfEV+oJqEf4isOMJ/c/pq5XLNEQw9jWarJ1oE8SpVSm3eQZmnd1PmqV3EzGZMAHVXIlufWBwXsWB752zLe+nRqan5gER9fWwVJs9cK+2dvWrNGWoIINwF7+qI1CjxSgXyyyUqfnMKv3FXkHv1TKUIN50qNf+sY7l7Np/++XuFraRhdr21qn/j0J0tB7NJ4x4bVcOEVUGFJNASN5yZCdKyOXKuXiEPo4UxjcVw1kEtbEeMWRW578GpqckQMZQGEiXj69f2Z1u0A/EYeyxp6E2YdSBTBUVTqB5wMCBtDEhNJ4YFXlf4Ytb15LvFfPXQjtnZYgS1IEtIlGxCad/YtHanYWiPMyYHEcnKhM5jLsLCPENvqAYJB2Gh6h2v5vnotjM/zkXHl8hNSerlq3vXDDQZ7PYLldo6RLZveTqeqYYvKhlDssq2//XM+erI85dnf4uOLJFbktTLe/3921ZkE68nDDaoocgu6qBy+Mv16rfnS9b+6QsXxg8ToccbBS/Afy5H8/mzz2Ru+8yXooRpjpeZ70JXmjjT1ETWOJ/4slrF3GmUfxVJvXyayyWS6c5eTxcm5tm1h2dmzkWP/g8h+gOI6nST3Y1zOgAAAABJRU5ErkJggg==",import.meta.url).href;t.setAttribute("src",e),t.setAttribute("alt",""),this.textHint=new r({tagName:"div",className:"text-hint-wrap"},this.createHintTranslateText());const i=new r({tagName:"div",className:"game-field-hint show"},new r({tagName:"div",className:"icon-hint"},t),this.textHint);return a.getHints("translate_hint")||i.removeClass("show"),i}clickPuzzleLine=t=>{const e=t.getNode().children[0];if(e){for(let i=0;i<this.linePuzzles.getNode().children.length;i+=1)if(this.linePuzzles.getNode().children[i].classList.contains("show-empty-card")){this.linePuzzles.getNode().children[i].append(e),this.linePuzzles.getNode().children[i].classList.remove("show-empty-card"),t.getNode().classList.add("empty-card"),t.getNode().removeAttribute("style"),t.getNode().classList.remove("wrong");break}}this.buttonCheck.addClass("hide")};clickPuzzle=t=>{const e=t.children[0],i=this.fieldLines[n.currentIndexPhrase].getNode().children;if(e){for(let s=0;s<i.length;s+=1)if(i[s].classList.contains("empty-card")){i[s].setAttribute("border","none"),e instanceof HTMLElement&&i[s].setAttribute("style",`z-index: ${n.numWordsInPhrase(n.currentIndexPhrase)*this.zIndexCoefficient-this.zIndexCoefficient*s};
            width: ${e.style.width}, height: ${e.style.height}`),t.classList.add("show-empty-card"),i[s].classList.remove("empty-card"),i[s].append(e);break}}this.checkPhraseFull()};checkPhraseFull(){const t=this.fieldLines[n.currentIndexPhrase].getNode().children;let e=0;for(let i=0;i<t.length;i+=1)t[i].textContent&&(e+=1);e===n.numWordsInPhrase(n.currentIndexPhrase)&&this.buttonCheck.removeClass("hide")}checkRightPhrase(){const t=this.fieldLines[n.currentIndexPhrase].getNode().children;let e="",i=!1;for(let s=0;s<t.length;s+=1)Number(t[s].children[0].getAttribute("data"))!==s?(t[s].classList.add("wrong"),i=!0):t[s].classList.remove("wrong"),t[s].textContent&&(e+=`${t[s].textContent} `);e.trim(),e.trim()===n.currentPhrase(n.currentIndexPhrase)&&!i&&(n.currentIndexPhrase===n.countOfLines-1&&this.showFullPicture(),this.buttonContinue.removeClass("hide"),this.buttonCheck.addClass("hide"),this.fieldLines[n.currentIndexPhrase].addClass("block"),n.hints.translate||this.textHint?.addClass("show"),n.hints.audio||this.headerPage.toolbarSound.addClass("show"))}moveToNextRound(){this.buttonAutofill.removeClass("hide"),this.textHint?.removeClass("show"),n.hints.audio||this.headerPage.toolbarSound.removeClass("show"),n.currentIndexPhrase===n.countOfLines-1?this.moveToNextPicture():(n.currentIndexPhrase+=1,this.gameLine&&(this.gameLine.getChildren().forEach(t=>{t.getNode().classList.contains("show-empty-card")&&this.gameLine?.removeChild(t)}),this.gameLine.setHTML(""),this.textHint?.destroyChildren(),n.moveXCurrentPosition=0,n.moveXPositions=[],n.moveYCurrentPosition=0,n.moveYPositions=[],n.positionsCards(),this.generatePuzzles(),this.inputPuzzles(),this.textHint?.append(this.createHintTranslateText()),this.buttonContinue.addClass("hide"),this.buttonCheck.addClass("hide")))}moveToNextPicture(){n.currentIndexPhrase=0,n.currentIndexPicture+=1,this.destroyChildren(),this.fieldPicture.destroyChildren(),n.moveXCurrentPosition=0,n.moveXPositions=[],n.moveYCurrentPosition=0,n.moveYPositions=[],n.positionsCards(),n.setMainPicture(),this.buttonContinue.addClass("hide"),this.buttonCheck.addClass("hide"),this.buttonAutofill.removeClass("hide"),this.fieldPicture=this.createFieldPicture(),this.buttonWrapper=new r({tagName:"div",className:"button-wrapper"},this.buttonContinue,this.buttonCheck,this.buttonAutofill),this.linePuzzles=this.createLinePuzzles(),this.hintLine=this.createLineHint(),this.headerPage=new N(this.changeHintTranslate,this.changeHintsBackground),this.generatePuzzles(),this.inputPuzzles(),this.appendChildren([this.headerPage,this.fieldPicture,this.hintLine,this.linePuzzles,this.buttonWrapper,new w])}autofillCards(){const t=this.fieldLines[n.currentIndexPhrase].getNode().children,e=this.gameLine?.getChildren();e&&e.map(i=>i.getChildren()[0].getNode()).sort((i,s)=>Number(i.getAttribute("data"))-Number(s.getAttribute("data"))).forEach((i,s)=>{t[s].setAttribute("style",`z-index: ${n.numWordsInPhrase(n.currentIndexPhrase)*10-10*s}; width: ${i.style.width}; height: ${i.style.height}`),t[s].setAttribute("border","none"),i.parentNode instanceof HTMLElement&&i.parentNode?.classList.add("show-empty-card"),t[s].classList.remove("empty-card"),t[s].append(i)}),this.checkRightPhrase(),this.buttonAutofill.addClass("hide")}showFullPicture(){this.fieldLines.forEach(t=>{t.addClass("opacity")}),this.fieldPicture.setAttribute("style",`background-image: url(https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${n.mainPicture})`),console.log(n.currentIndexPicture),this.dopinfo?.destroyChildren(),this.dopinfo?.append(this.createInfoPicture()),this.dopinfo?.addClass("show")}}export{R as default};
