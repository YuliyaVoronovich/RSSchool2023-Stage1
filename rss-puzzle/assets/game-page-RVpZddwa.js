function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as m,L as a,B as r}from"./index-oxE0rEuk.js";import{B as g}from"./button-CXzmr5Ri.js";import{L as I}from"./logout-BomFrQc5.js";const P=await m(()=>import("./wordCollectionLevel1-DAd_RTnK.js"),__vite__mapDeps([]),import.meta.url),C=await m(()=>import("./wordCollectionLevel2-1qRKlopN.js"),__vite__mapDeps([]),import.meta.url),L=await m(()=>import("./wordCollectionLevel3-Caq-wj-r.js"),__vite__mapDeps([]),import.meta.url),x=await m(()=>import("./wordCollectionLevel4-CGLGOYkr.js"),__vite__mapDeps([]),import.meta.url),v=await m(()=>import("./wordCollectionLevel5-DD8ZfQ_d.js"),__vite__mapDeps([]),import.meta.url),w=await m(()=>import("./wordCollectionLevel6-BmMsl4Vt.js"),__vite__mapDeps([]),import.meta.url);class c{rounds=[];roundsCount=0;dataRounds(t){if(c.isData(P)&&c.isData(C)&&c.isData(L)&&c.isData(x)&&c.isData(v)&&c.isData(w))switch(t){case 1:{this.rounds=P.rounds,this.roundsCount=P.roundsCount;break}case 2:{this.rounds=C.rounds,this.roundsCount=C.roundsCount;break}case 3:{this.rounds=L.rounds,this.roundsCount=L.roundsCount;break}case 4:{this.rounds=x.rounds,this.roundsCount=x.roundsCount;break}case 5:{this.rounds=v.rounds,this.roundsCount=v.roundsCount;break}case 6:{this.rounds=w.rounds,this.roundsCount=w.roundsCount;break}default:this.rounds=P.rounds,this.roundsCount=P.roundsCount;break}return this.rounds}dataRoundsCount(){return this.roundsCount}static isData(t){return t!=null}}const l=new c;class N{currentIndexLevel=1;currentIndexPicture=0;currentIndexPhrase=0;widthPicture=700;mainPicture="";widthIndent=10;countIndent=2;widthGap=0;countLines=10;heigthOfLine=40;countOfLevels=6;countRoundsOfTheLevel=6;moveXCurrentPosition=0;moveXPositions=[];moveYCurrentPosition=0;moveYPositions=[];hints={translate:a.getHints("translate_hint"),audio:a.getHints("audio_hint"),picture:a.getHints("picture_hint")};constructor(){const t=new Image;t.src=`src/app/data/images/${this.mainPicture}`,this.heigthOfLine=this.widthPicture/t.width*t.height/this.countLines||this.heigthOfLine,this.countRoundsOfTheLevel=this.getData(this.currentIndexLevel),console.log(this.countRoundsOfTheLevel),this.positionsCards(),this.setMainPicture()}getData(t=this.currentIndexLevel){return l.dataRounds(t).length}textHint(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExampleTranslate}currentAudio(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].audioExample}currentPhrase(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample}currentMainPicture(t=this.currentIndexPicture){return l.dataRounds(this.currentIndexLevel)[t].levelData.imageSrc}get countOfLines(){return this.countLines}get heigthOfLineValue(){return this.heigthOfLine}set indent(t){this.widthIndent=t}setMainPicture(){this.mainPicture=l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].levelData.imageSrc}numWordsInPhrase(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample.split(" ").length}numSymbolsInPhrase(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample.split(" ").join("").length}positionsCards=()=>{const t=this.currentPhrase(this.currentIndexPhrase).split(" "),e=[],n=[];for(let i=0;i<t.length;i+=1)e.push(this.moveXCurrentPosition),this.moveXCurrentPosition+=this.widthCard(t[i]);this.moveXPositions=e;for(let i=0;i<this.countLines;i+=1)n.push(this.moveYCurrentPosition),this.moveYCurrentPosition+=this.heigthOfLine;this.moveYPositions=n};widthCard(t){return(this.widthPicture-this.numWordsInPhrase()*this.countIndent*this.widthIndent-this.widthGap*(this.numWordsInPhrase()-1))/this.numSymbolsInPhrase()*t.length+this.countIndent*this.widthIndent}}const s=new N;class A{play(t,e){const n="https://github.com/rolling-scopes-school/rss-puzzle-data/raw/main/",i=new Audio(n+s.currentAudio(t));i.play().then(()=>{i.addEventListener("ended",()=>{e()})}).catch(()=>{throw new Error("не удалось воспроизвести аудиофайл")})}}const k=new A;class b extends r{constructor(t,e){super({tagName:"div",className:"game-header"}),this.onClickTranslate=t,this.onClickBackground=e;const n=a.getHints("translate_hint"),i=a.getHints("picture_hint"),u=a.getHints("audio_hint"),o=this.createButtonTranslate(n),d=this.createButtonBackground(i),h=this.createButtonAudio(u);this.toolbarSound=this.createMute(u),this.hintTranslate=new r({tagName:"div",className:"toolbar-hints"},o,d,h);const p=new r({tagName:"div",className:"select-wrapper"});this.appendChildren([this.hintTranslate,this.toolbarSound,p])}hintTranslate;toolbarSound;isSound=!1;createMute=t=>(this.toolbarSound=new r({tagName:"div",className:"toolbar-sound"},new g({className:"icon-button-sound",textContent:"",onClick:e=>{this.isSound||(e.preventDefault(),this.toolbarSound.addClass("active"),this.isSound=!0,k.play(s.currentIndexPhrase,()=>{this.toolbarSound.removeClass("active"),this.isSound=!1}))}})),this.toolbarSound.toggleClass("show",t),this.toolbarSound);createButtonTranslate(t){const e=new r({tagName:"div",className:"hint-translate"},new g({className:"icon-button",textContent:"",onClick:n=>{n.preventDefault(),this.toogleHintTranslate(e),this.onClickTranslate(s.hints)}}));return e.toggleClass("hint-on",t),e}toogleHintTranslate(t){const e=a.getHints("translate_hint");a.setItem("translate_hint",!e),t.toggleClass("hint-on"),s.hints.translate=!e}createButtonBackground(t){const e=new r({tagName:"div",className:"hint-background"},new g({className:"icon-button",onClick:n=>{n.preventDefault(),this.toogleHintBackground(e),this.onClickBackground(s.hints)}}));return e.toggleClass("hint-on",t),e}toogleHintBackground(t){const e=a.getHints("picture_hint");a.setItem("picture_hint",!e),t.toggleClass("hint-on"),s.hints.picture=!e}createButtonAudio(t){const e=new r({tagName:"div",className:"hint-audio"},new g({className:"icon-button",onClick:n=>{n.preventDefault(),this.toogleHintAudio(e),this.toolbarSound.toggleClass("show")}}));return e.toggleClass("hint-on",t),e}toogleHintAudio(t){const e=a.getHints("audio_hint");a.setItem("audio_hint",!e),t.toggleClass("hint-on"),s.hints.audio=!e}}class z extends r{onClick;positionYOnset=12;constructor(t,e,n,i,u,o,d,h){super({tagName:"div",className:"tile-card"}),this.append(this.createCard(t,e,n,i,u,o,d)),this.onClick=h,this.onClick&&this.addListener("click",()=>{this.onClick(this.getNode())})}createCard(t,e,n,i,u,o,d){const h=new r({tagName:"div",className:`tile-${e} card`},new r({tagName:"div",className:"word",textContent:t},this.createAfter(e,u,o,n,d)));let p="";return i&&(p=`height:${i}px`),h.setAttribute("style",`width:${n}px;${p};`),d&&(h.getNode().style.backgroundImage=`url(https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${s.mainPicture})`,h.getNode().style.backgroundPosition=`-${u}px  -${o}px`),h.setAttribute("data",`${e}`),h}createAfter(t,e,n,i,u){const o=new r({tagName:"span",className:"after"});t===s.numWordsInPhrase(s.currentIndexPhrase)-1&&o.setAttribute("style","backgroundColor: #fff; left:0");const d=e+i,h=n+this.positionYOnset;return u&&(o.getNode().style.backgroundImage=`url(https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/images/${s.mainPicture})`,o.getNode().style.backgroundPosition=`-${d}px  -${h}px`),o}}class S extends r{zIndexCoefficient=10;fieldPicture;fieldLines=[];linePuzzles;gameLine;hintLine;buttonContinue;buttonCheck;buttonAutofill;buttonWrapper;textHint;headerPage;showBackgroundOnCard=!0;constructor(){super({tagName:"div",className:"game-wrapper"}),this.fieldPicture=this.createFieldPicture(),this.linePuzzles=this.createLinePuzzles(),this.buttonContinue=this.createButtonContinue(),this.buttonCheck=this.createButtonCheck(),this.buttonAutofill=this.createButtonAutofill(),this.hintLine=this.createLineHint(),this.headerPage=new b(this.changeHintTranslate,this.changeHintsBackground),this.buttonWrapper=new r({tagName:"div",className:"button-wrapper"},this.buttonContinue,this.buttonCheck,this.buttonAutofill),this.inputPuzzles(),this.appendChildren([this.headerPage,this.fieldPicture,this.hintLine,this.linePuzzles,this.buttonWrapper,new I])}changeHintTranslate=t=>{console.log(t),t.translate?this.hintLine.addClass("show"):this.hintLine.removeClass("show")};changeHintsBackground=t=>{console.log(t)};createFieldPicture(){return new r({tagName:"div",className:"game-field"},...this.generateLinesOfField())}createLinePuzzles(){return this.gameLine=new r({tagName:"div",className:"game-line"}),this.gameLine}inputPuzzles(){const t=this.generatePuzzles();for(let e=0;e<t.length;e+=1)t[e].getNode().style.zIndex=`${s.numWordsInPhrase(s.currentIndexPhrase)*this.zIndexCoefficient-this.zIndexCoefficient*e}`,this.gameLine?.append(t[e])}generatePuzzles(){return s.currentPhrase(s.currentIndexPhrase).split(" ").map((e,n)=>new z(e,n,s.widthCard(e),s.heigthOfLine,s.moveXPositions[n],s.moveYPositions[s.currentIndexPhrase],this.showBackgroundOnCard,this.clickPuzzle)).sort(()=>Math.random()-.5)}generateLinesOfField(){this.fieldLines=[];for(let t=0;t<s.countOfLines;t+=1){const e=new r({tagName:"div",className:"field-line"},...this.generateTilesOfLine(t));e.setAttribute("style",`height:${s.heigthOfLine}px`),this.fieldLines.push(e)}return this.fieldLines}generateTilesOfLine(t){const e=[];for(let n=0;n<s.numWordsInPhrase(t);n+=1){const i=new r({tagName:"div",className:"tile-card empty-card"});i.addListener("click",()=>{this.clickPuzzleLine(i)}),e.push(i)}return e}createButtonContinue(){return new g({className:"form-button game-button hide",textContent:"Continue",onClick:t=>{t.preventDefault(),this.moveToNextRound()}})}createButtonCheck(){return new g({className:"form-button game-button hide",textContent:"Check",onClick:t=>{t.preventDefault(),this.checkRightPhrase()}})}createButtonAutofill(){return new g({className:"form-button game-button game-button-autofill",textContent:"I don't no ;(",onClick:t=>{t.preventDefault(),this.autofillCards()}})}createHintTranslateText=()=>new r({tagName:"span",className:"text-hint",textContent:s.textHint(s.currentIndexPhrase)});createLineHint(){const t=new r({tagName:"img",className:"icon-hint"}),e=new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABHNCSVQICAgIfAhkiAAAAAFzUkdCAK7OHOkAAAAEZ0FNQQAAsY8L/GEFAAAACXBIWXMAAA7CAAAOwgEVKEqAAAAE+UlEQVRIS8VVW2wUVRj+z5mZ3elut912t8WtllpoG5EESYPSKOUiRCJqLMZo9MEQLMQXn/GFBxOM+uCDPBFiNIaYaIxEDSoPlhRpjJfUYKpNGhokYLkpW/Y2u3M7x+/MDO2uRdEX/bNn/90z//m+/3b+of9CWKRvKXuJDLMtl7OcWqrsEJVdKh2j+V/xSIQWfy1/S7I7k0mZkm8nybbEOeszNb0j2xxPtic1SsR0q0nXLscZ/aRJdqI860yMXJspRUcb5KYkL7a3t/hkPOdJOdqi63097U3J1cuS1J0xKdGkkY5TnDHisLU9QZ4vi54n5xxbfH69aL09NDE9HSKFsoTkhc7OIfLYAY1o60A2Sff1ttLKXIJiGkn1XAhJvi9J4l+0GIdWQAL7JVtcLJa8Vz4ZSx1+mU566kwDyWh7504m6WBK1+4YWpGm4YG0TCU0clxBPjKvQIXrke84YMRRIwZS7IM4gJKSGZwTIvLzZWf/4NjpVxXuAsloW8d2QfJIq2F0PHR3Vj7Q34ozkhwPXgMkILBrZNw1SPHhR0iWi1R4/xC891F5BhvFIUnxmYwxy/Ht62X55PqTPxxTaaVdbV3dHonXTK51bBlolxtA4MM6IFDg0fJrNmm9qyi5dYTigxuQNhAoByICZascqrhCNhtaPB6jPe/09JgBiWTOLo342tVdKbq/L60KSa4LrwKAuqXIEI0SUSmTgBPKJlzYi3REREj9xr7uli7+bGtrG5PyiVRMp+GVaanrRA4KIFTofwaQjEQtIqlZ2IPdAnjjcoER4yyNwrVxnfMudOGa/o4ELUsZhFYk6YfeqDTUewgVkEgUX9j2QoQNNje06kD81jxXcuQyy9GFy9tMius8SNVifsNDi0VFJOgs8uwgbSEgih5EXedYcJiR5fpFwUWBuz6vGbhYzXHkCV2ijFXRVcsqrQD8CAR/gwiUXRANHAqIosgXIsF+DJjA+M60zUvc1+UlT8jf1VULcxx5rnSdh8E+18m5cpHyR49QYfx40LrYDoHVAri6qCg4C+6WKz9aNzlpcZqfn6sK8UXJ8gjpa/Qo0DdWFJXjEukGGblukGqRXWSL5/iQiYFTdsSJfEV+oJqEf4isOMJ/c/pq5XLNEQw9jWarJ1oE8SpVSm3eQZmnd1PmqV3EzGZMAHVXIlufWBwXsWB752zLe+nRqan5gER9fWwVJs9cK+2dvWrNGWoIINwF7+qI1CjxSgXyyyUqfnMKv3FXkHv1TKUIN50qNf+sY7l7Np/++XuFraRhdr21qn/j0J0tB7NJ4x4bVcOEVUGFJNASN5yZCdKyOXKuXiEPo4UxjcVw1kEtbEeMWRW578GpqckQMZQGEiXj69f2Z1u0A/EYeyxp6E2YdSBTBUVTqB5wMCBtDEhNJ4YFXlf4Ytb15LvFfPXQjtnZYgS1IEtIlGxCad/YtHanYWiPMyYHEcnKhM5jLsLCPENvqAYJB2Gh6h2v5vnotjM/zkXHl8hNSerlq3vXDDQZ7PYLldo6RLZveTqeqYYvKhlDssq2//XM+erI85dnf4uOLJFbktTLe/3921ZkE68nDDaoocgu6qBy+Mv16rfnS9b+6QsXxg8ToccbBS/Afy5H8/mzz2Ru+8yXooRpjpeZ70JXmjjT1ETWOJ/4slrF3GmUfxVJvXyayyWS6c5eTxcm5tm1h2dmzkWP/g8h+gOI6nST3Y1zOgAAAABJRU5ErkJggg==",import.meta.url).href;t.setAttribute("src",e),t.setAttribute("alt",""),this.textHint=new r({tagName:"div",className:"text-hint-wrap"},this.createHintTranslateText());const n=new r({tagName:"div",className:"game-field-hint show"},new r({tagName:"div",className:"icon-hint"},t),this.textHint);return a.getHints("translate_hint")||n.removeClass("show"),n}clickPuzzleLine=t=>{const e=t.getNode().children[0];if(e){for(let n=0;n<this.linePuzzles.getNode().children.length;n+=1)if(this.linePuzzles.getNode().children[n].classList.contains("show-empty-card")){this.linePuzzles.getNode().children[n].append(e),this.linePuzzles.getNode().children[n].classList.remove("show-empty-card"),t.getNode().classList.add("empty-card"),t.getNode().removeAttribute("style"),t.getNode().classList.remove("error");break}}this.buttonCheck.addClass("hide")};clickPuzzle=t=>{const e=t.children[0],n=this.fieldLines[s.currentIndexPhrase].getNode().children;if(e){for(let i=0;i<n.length;i+=1)if(n[i].classList.contains("empty-card")){n[i].setAttribute("border","none"),e instanceof HTMLElement&&n[i].setAttribute("style",`z-index: ${s.numWordsInPhrase(s.currentIndexPhrase)*this.zIndexCoefficient-this.zIndexCoefficient*i};
            width: ${e.style.width}, height: ${e.style.height}`),t.classList.add("show-empty-card"),n[i].classList.remove("empty-card"),n[i].append(e);break}}this.checkPhraseFull()};checkPhraseFull(){const t=this.fieldLines[s.currentIndexPhrase].getNode().children;let e=0;for(let n=0;n<t.length;n+=1)t[n].textContent&&(e+=1);e===s.numWordsInPhrase(s.currentIndexPhrase)&&this.buttonCheck.removeClass("hide")}checkRightPhrase(){const t=this.fieldLines[s.currentIndexPhrase].getNode().children;let e="",n=!1;for(let i=0;i<t.length;i+=1)Number(t[i].children[0].getAttribute("data"))!==i?(t[i].classList.add("wrong"),n=!0):t[i].classList.remove("wrong"),t[i].textContent&&(e+=`${t[i].textContent} `);e.trim(),e.trim()===s.currentPhrase(s.currentIndexPhrase)&&!n&&(this.buttonContinue.removeClass("hide"),this.buttonCheck.addClass("hide"),this.fieldLines[s.currentIndexPhrase].addClass("block"),s.hints.translate||this.textHint?.addClass("show"),s.hints.audio||this.headerPage.toolbarSound.addClass("show"))}moveToNextRound(){this.buttonAutofill.removeClass("hide"),this.textHint?.removeClass("show"),s.hints.audio||this.headerPage.toolbarSound.removeClass("show"),s.currentIndexPhrase===s.countOfLines-1?this.moveToNextPicture():(s.currentIndexPhrase+=1,this.gameLine&&(this.gameLine.getChildren().forEach(t=>{t.getNode().classList.contains("show-empty-card")&&this.gameLine?.removeChild(t)}),this.gameLine.setHTML(""),this.textHint?.destroyChildren(),s.moveXCurrentPosition=0,s.moveXPositions=[],s.moveYCurrentPosition=0,s.moveYPositions=[],s.positionsCards(),this.generatePuzzles(),this.inputPuzzles(),this.textHint?.append(this.createHintTranslateText()),this.buttonContinue.addClass("hide"),this.buttonCheck.addClass("hide")))}moveToNextPicture(){s.currentIndexPhrase=0,s.currentIndexPicture+=1,this.destroyChildren(),this.fieldPicture.destroyChildren(),s.moveXCurrentPosition=0,s.moveXPositions=[],s.moveYCurrentPosition=0,s.moveYPositions=[],s.positionsCards(),s.setMainPicture(),this.buttonContinue.addClass("hide"),this.buttonCheck.addClass("hide"),this.buttonAutofill.removeClass("hide"),this.fieldPicture=this.createFieldPicture(),this.buttonWrapper=new r({tagName:"div",className:"button-wrapper"},this.buttonContinue,this.buttonCheck,this.buttonAutofill),this.linePuzzles=this.createLinePuzzles(),this.hintLine=this.createLineHint(),this.headerPage=new b(this.changeHintTranslate,this.changeHintsBackground),this.generatePuzzles(),this.inputPuzzles(),this.appendChildren([this.headerPage,this.fieldPicture,this.hintLine,this.linePuzzles,this.buttonWrapper,new I])}autofillCards(){const t=this.fieldLines[s.currentIndexPhrase].getNode().children,e=this.gameLine?.getChildren();e&&e.map(n=>n.getChildren()[0].getNode()).sort((n,i)=>Number(n.getAttribute("data"))-Number(i.getAttribute("data"))).forEach((n,i)=>{t[i].setAttribute("style",`z-index: ${s.numWordsInPhrase(s.currentIndexPhrase)*10-10*i}; width: ${n.style.width}; height: ${n.style.height}`),t[i].setAttribute("border","none"),n.parentNode instanceof HTMLElement&&n.parentNode?.classList.add("show-empty-card"),t[i].classList.remove("empty-card"),t[i].append(n)}),this.checkRightPhrase(),this.buttonAutofill.addClass("hide")}}export{S as default};
