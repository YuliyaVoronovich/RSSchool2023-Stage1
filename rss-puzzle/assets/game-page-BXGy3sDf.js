function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as m,L as a,B as r}from"./index-0Zp8XGIa.js";import{B as g}from"./button-CMEvAuj7.js";import{L as w}from"./logout-C69AGKRZ.js";const P=await m(()=>import("./wordCollectionLevel1-DAd_RTnK.js"),__vite__mapDeps([]),import.meta.url),f=await m(()=>import("./wordCollectionLevel2-1qRKlopN.js"),__vite__mapDeps([]),import.meta.url),L=await m(()=>import("./wordCollectionLevel3-Caq-wj-r.js"),__vite__mapDeps([]),import.meta.url),v=await m(()=>import("./wordCollectionLevel4-CGLGOYkr.js"),__vite__mapDeps([]),import.meta.url),x=await m(()=>import("./wordCollectionLevel5-DD8ZfQ_d.js"),__vite__mapDeps([]),import.meta.url),b=await m(()=>import("./wordCollectionLevel6-BmMsl4Vt.js"),__vite__mapDeps([]),import.meta.url);class c{rounds=[];roundsCount=0;dataRounds(t){if(c.isData(P)&&c.isData(f)&&c.isData(L)&&c.isData(v)&&c.isData(x)&&c.isData(b))switch(t){case 1:{this.rounds=P.rounds,this.roundsCount=P.roundsCount;break}case 2:{this.rounds=f.rounds,this.roundsCount=f.roundsCount;break}case 3:{this.rounds=L.rounds,this.roundsCount=L.roundsCount;break}case 4:{this.rounds=v.rounds,this.roundsCount=v.roundsCount;break}case 5:{this.rounds=x.rounds,this.roundsCount=x.roundsCount;break}case 6:{this.rounds=b.rounds,this.roundsCount=b.roundsCount;break}default:this.rounds=P.rounds,this.roundsCount=P.roundsCount;break}return this.rounds}dataRoundsCount(){return this.roundsCount}static isData(t){return t!=null}}const l=new c;class I{currentIndexLevel=1;currentIndexPicture=0;currentIndexPhrase=0;widthPicture=700;mainPicture="";widthIndent=10;countIndent=2;widthGap=0;countLines=10;heigthOfLine=40;countOfLevels=6;countRoundsOfTheLevel=6;moveXCurrentPosition=0;moveXPositions=[];moveYCurrentPosition=0;moveYPositions=[];hints={translate:a.getHints("translate_hint"),audio:a.getHints("audio_hint"),picture:a.getHints("picture_hint")};constructor(){const t=new Image;t.src=`src/app/data/images/${this.mainPicture}`,this.heigthOfLine=this.widthPicture/t.width*t.height/this.countLines||this.heigthOfLine,this.countRoundsOfTheLevel=this.getData(this.currentIndexLevel),console.log(this.countRoundsOfTheLevel),this.positionsCards(),this.setMainPicture()}getData(t=this.currentIndexLevel){return l.dataRounds(t).length}textHint(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExampleTranslate}currentAudio(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].audioExample}currentPhrase(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample}currentMainPicture(t=this.currentIndexPicture){return l.dataRounds(this.currentIndexLevel)[t].levelData.imageSrc}get countOfLines(){return this.countLines}get heigthOfLineValue(){return this.heigthOfLine}set indent(t){this.widthIndent=t}setMainPicture(){this.mainPicture=l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].levelData.imageSrc}numWordsInPhrase(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample.split(" ").length}numSymbolsInPhrase(t=this.currentIndexPhrase){return l.dataRounds(this.currentIndexLevel)[this.currentIndexPicture].words[t].textExample.split(" ").join("").length}positionsCards=()=>{const t=this.currentPhrase(this.currentIndexPhrase).split(" "),e=[],s=[];for(let i=0;i<t.length;i+=1)e.push(this.moveXCurrentPosition),this.moveXCurrentPosition+=this.widthCard(t[i]);this.moveXPositions=e;for(let i=0;i<this.countLines;i+=1)s.push(this.moveYCurrentPosition),this.moveYCurrentPosition+=this.heigthOfLine;this.moveYPositions=s};widthCard(t){return(this.widthPicture-this.numWordsInPhrase()*this.countIndent*this.widthIndent-this.widthGap*(this.numWordsInPhrase()-1))/this.numSymbolsInPhrase()*t.length+this.countIndent*this.widthIndent}}const n=new I;class k{play(t,e){const s="https://github.com/rolling-scopes-school/rss-puzzle-data/raw/main/",i=new Audio(s+n.currentAudio(t));i.play().then(()=>{i.addEventListener("ended",()=>{e()})}).catch(()=>{throw new Error("не удалось воспроизвести аудиофайл")})}}const z=new k;class N extends r{constructor(t,e){super({tagName:"div",className:"game-header"}),this.onClickTranslate=t,this.onClickBackground=e;const s=a.getHints("translate_hint"),i=a.getHints("picture_hint"),u=a.getHints("audio_hint"),o=this.createButtonTranslate(s),d=this.createButtonBackground(i),h=this.createButtonAudio(u);this.toolbarSound=this.createMute(u),this.hintTranslate=new r({tagName:"div",className:"toolbar-hints"},o,d,h);const C=new r({tagName:"div",className:"select-wrapper"});this.appendChildren([this.hintTranslate,this.toolbarSound,C])}hintTranslate;toolbarSound;isSound=!1;createMute=t=>(this.toolbarSound=new r({tagName:"div",className:"toolbar-sound"},new g({className:"icon-button-sound",textContent:"",onClick:e=>{this.isSound||(e.preventDefault(),this.toolbarSound.addClass("active"),this.isSound=!0,z.play(n.currentIndexPhrase,()=>{this.toolbarSound.removeClass("active"),this.isSound=!1}))}})),this.toolbarSound.toggleClass("show",t),this.toolbarSound);createButtonTranslate(t){const e=new r({tagName:"div",className:"hint-translate"},new g({className:"icon-button",textContent:"",onClick:s=>{s.preventDefault(),this.toogleHintTranslate(e),this.onClickTranslate(n.hints)}}));return e.toggleClass("hint-on",t),e}toogleHintTranslate(t){const e=a.getHints("translate_hint");a.setItem("translate_hint",!e),t.toggleClass("hint-on"),n.hints.translate=!e}createButtonBackground(t){const e=new r({tagName:"div",className:"hint-background"},new g({className:"icon-button",onClick:s=>{s.preventDefault(),this.toogleHintBackground(e),this.onClickBackground(n.hints)}}));return e.toggleClass("hint-on",t),e}toogleHintBackground(t){const e=a.getHints("picture_hint");a.setItem("picture_hint",!e),t.toggleClass("hint-on"),n.hints.picture=!e}createButtonAudio(t){const e=new r({tagName:"div",className:"hint-audio"},new g({className:"icon-button",onClick:s=>{s.preventDefault(),this.toogleHintAudio(e),this.toolbarSound.toggleClass("show")}}));return e.toggleClass("hint-on",t),e}toogleHintAudio(t){const e=a.getHints("audio_hint");a.setItem("audio_hint",!e),t.toggleClass("hint-on"),n.hints.audio=!e}}class T extends r{onClick;positionYOnset=12;constructor(t,e,s,i,u,o,d,h){super({tagName:"div",className:"tile-card"}),this.append(this.createCard(t,e,s,i,u,o,d)),this.onClick=h,this.onClick&&this.addListener("click",()=>{this.onClick(this.getNode())})}createCard(t,e,s,i,u,o,d){const h=new r({tagName:"div",className:`tile-${e} card`},new r({tagName:"div",className:"word",textContent:t},this.createAfter(e,u,o,s,d)));let C="";return i&&(C=`height:${i}px`),h.setAttribute("style",`width:${s}px;${C};`),d&&(h.getNode().style.backgroundImage=`url(/src/app/data/images/${n.mainPicture})`,h.getNode().style.backgroundPosition=`-${u}px  -${o}px`),h.setAttribute("data",`${e}`),h}createAfter(t,e,s,i,u){const o=new r({tagName:"span",className:"after"});t===n.numWordsInPhrase(n.currentIndexPhrase)-1&&o.setAttribute("style","backgroundColor: #fff; left:0");const d=e+i,h=s+this.positionYOnset;return u&&(o.getNode().style.backgroundImage=`url(/src/app/data/images/${n.mainPicture})`,o.getNode().style.backgroundPosition=`-${d}px  -${h}px`),o}}class y extends r{zIndexCoefficient=10;fieldPicture;fieldLines=[];linePuzzles;gameLine;hintLine;buttonContinue;buttonCheck;buttonAutofill;buttonWrapper;textHint;headerPage;showBackgroundOnCard=!0;constructor(){super({tagName:"div",className:"game-wrapper"}),this.fieldPicture=this.createFieldPicture(),this.linePuzzles=this.createLinePuzzles(),this.buttonContinue=this.createButtonContinue(),this.buttonCheck=this.createButtonCheck(),this.buttonAutofill=this.createButtonAutofill(),this.hintLine=this.createLineHint(),this.headerPage=new N(this.changeHintTranslate,this.changeHintsBackground),this.buttonWrapper=new r({tagName:"div",className:"button-wrapper"},this.buttonContinue,this.buttonCheck,this.buttonAutofill),this.inputPuzzles(),this.appendChildren([this.headerPage,this.fieldPicture,this.hintLine,this.linePuzzles,this.buttonWrapper,new w])}changeHintTranslate=t=>{console.log(t),t.translate?this.hintLine.addClass("show"):this.hintLine.removeClass("show")};changeHintsBackground=t=>{console.log(t)};createFieldPicture(){return new r({tagName:"div",className:"game-field"},...this.generateLinesOfField())}createLinePuzzles(){return this.gameLine=new r({tagName:"div",className:"game-line"}),this.gameLine}inputPuzzles(){const t=this.generatePuzzles();for(let e=0;e<t.length;e+=1)t[e].getNode().style.zIndex=`${n.numWordsInPhrase(n.currentIndexPhrase)*this.zIndexCoefficient-this.zIndexCoefficient*e}`,this.gameLine?.append(t[e])}generatePuzzles(){const t=n.currentPhrase(n.currentIndexPhrase);return console.log(this.showBackgroundOnCard),t.split(" ").map((e,s)=>new T(e,s,n.widthCard(e),n.heigthOfLine,n.moveXPositions[s],n.moveYPositions[n.currentIndexPhrase],this.showBackgroundOnCard,this.clickPuzzle)).sort(()=>Math.random()-.5)}generateLinesOfField(){this.fieldLines=[];for(let t=0;t<n.countOfLines;t+=1){const e=new r({tagName:"div",className:"field-line"},...this.generateTilesOfLine(t));e.setAttribute("style",`height:${n.heigthOfLine}px`),this.fieldLines.push(e)}return this.fieldLines}generateTilesOfLine(t){const e=[];for(let s=0;s<n.numWordsInPhrase(t);s+=1){const i=new r({tagName:"div",className:"tile-card empty-card"});i.addListener("click",()=>{this.clickPuzzleLine(i)}),e.push(i)}return e}createButtonContinue(){return new g({className:"form-button game-button hide",textContent:"Continue",onClick:t=>{t.preventDefault(),this.moveToNextRound()}})}createButtonCheck(){return new g({className:"form-button game-button hide",textContent:"Check",onClick:t=>{t.preventDefault(),this.checkRightPhrase()}})}createButtonAutofill(){return new g({className:"form-button game-button game-button-autofill",textContent:"I don't no ;(",onClick:t=>{t.preventDefault(),this.autofillCards()}})}createHintTranslateText=()=>new r({tagName:"span",className:"text-hint",textContent:n.textHint(n.currentIndexPhrase)});createLineHint(){const t=new r({tagName:"img",className:"icon-hint"});t.setAttribute("src","./src/assets/images/hint.png"),t.setAttribute("alt",""),this.textHint=new r({tagName:"div",className:"text-hint-wrap"},this.createHintTranslateText());const e=new r({tagName:"div",className:"game-field-hint show"},new r({tagName:"div",className:"icon-hint"},t),this.textHint);return a.getHints("translate_hint")||e.removeClass("show"),e}clickPuzzleLine=t=>{const e=t.getNode().children[0];if(e){for(let s=0;s<this.linePuzzles.getNode().children.length;s+=1)if(this.linePuzzles.getNode().children[s].classList.contains("show-empty-card")){this.linePuzzles.getNode().children[s].append(e),this.linePuzzles.getNode().children[s].classList.remove("show-empty-card"),t.getNode().classList.add("empty-card"),t.getNode().removeAttribute("style"),t.getNode().classList.remove("error");break}}this.buttonCheck.addClass("hide")};clickPuzzle=t=>{const e=t.children[0],s=this.fieldLines[n.currentIndexPhrase].getNode().children;if(e){for(let i=0;i<s.length;i+=1)if(s[i].classList.contains("empty-card")){s[i].setAttribute("border","none"),e instanceof HTMLElement&&s[i].setAttribute("style",`z-index: ${n.numWordsInPhrase(n.currentIndexPhrase)*this.zIndexCoefficient-this.zIndexCoefficient*i};
            width: ${e.style.width}, height: ${e.style.height}`),t.classList.add("show-empty-card"),s[i].classList.remove("empty-card"),s[i].append(e);break}}this.checkPhraseFull()};checkPhraseFull(){const t=this.fieldLines[n.currentIndexPhrase].getNode().children;let e=0;for(let s=0;s<t.length;s+=1)t[s].textContent&&(e+=1);e===n.numWordsInPhrase(n.currentIndexPhrase)&&this.buttonCheck.removeClass("hide")}checkRightPhrase(){const t=this.fieldLines[n.currentIndexPhrase].getNode().children;let e="",s=!1;for(let i=0;i<t.length;i+=1)Number(t[i].children[0].getAttribute("data"))!==i?(t[i].classList.add("error"),s=!0):t[i].classList.remove("error"),t[i].textContent&&(e+=`${t[i].textContent} `);e.trim(),e.trim()===n.currentPhrase(n.currentIndexPhrase)&&!s&&(this.buttonContinue.removeClass("hide"),this.buttonCheck.addClass("hide"),this.fieldLines[n.currentIndexPhrase].addClass("block"),n.hints.translate||this.textHint?.addClass("show"),n.hints.audio||this.headerPage.toolbarSound.addClass("show"))}moveToNextRound(){this.buttonAutofill.removeClass("hide"),this.textHint?.removeClass("show"),n.hints.audio||this.headerPage.toolbarSound.removeClass("show"),n.currentIndexPhrase===n.countOfLines-1?this.moveToNextPicture():(n.currentIndexPhrase+=1,this.gameLine&&(this.gameLine.getChildren().forEach(t=>{t.getNode().classList.contains("show-empty-card")&&this.gameLine?.removeChild(t)}),this.gameLine.setHTML(""),this.textHint?.destroyChildren(),n.moveXCurrentPosition=0,n.moveXPositions=[],n.moveYCurrentPosition=0,n.moveYPositions=[],n.positionsCards(),this.generatePuzzles(),this.inputPuzzles(),this.textHint?.append(this.createHintTranslateText()),this.buttonContinue.addClass("hide"),this.buttonCheck.addClass("hide")))}moveToNextPicture(){n.currentIndexPhrase=0,n.currentIndexPicture+=1,this.destroyChildren(),this.fieldPicture.destroyChildren(),n.moveXCurrentPosition=0,n.moveXPositions=[],n.moveYCurrentPosition=0,n.moveYPositions=[],n.positionsCards(),n.setMainPicture(),this.buttonContinue.addClass("hide"),this.buttonCheck.addClass("hide"),this.buttonAutofill.removeClass("hide"),this.fieldPicture=this.createFieldPicture(),this.buttonWrapper=new r({tagName:"div",className:"button-wrapper"},this.buttonContinue,this.buttonCheck,this.buttonAutofill),this.linePuzzles=this.createLinePuzzles(),this.hintLine=this.createLineHint(),this.headerPage=new N(this.changeHintTranslate,this.changeHintsBackground),this.generatePuzzles(),this.inputPuzzles(),this.appendChildren([this.headerPage,this.fieldPicture,this.hintLine,this.linePuzzles,this.buttonWrapper,new w])}autofillCards(){const t=this.fieldLines[n.currentIndexPhrase].getNode().children,e=this.gameLine?.getChildren();e&&e.map(s=>s.getChildren()[0].getNode()).sort((s,i)=>Number(s.getAttribute("data"))-Number(i.getAttribute("data"))).forEach((s,i)=>{t[i].setAttribute("style",`z-index: ${n.numWordsInPhrase(n.currentIndexPhrase)*10-10*i}; width: ${s.style.width}; height: ${s.style.height}`),t[i].setAttribute("border","none"),s.parentNode instanceof HTMLElement&&s.parentNode?.classList.add("show-empty-card"),t[i].classList.remove("empty-card"),t[i].append(s)}),this.checkRightPhrase(),this.buttonAutofill.addClass("hide")}}export{y as default};
